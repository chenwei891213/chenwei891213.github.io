<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="description"
        content="GCC: Generative Color Constancy via Diffusing a Color Checker">
  <meta name="keywords" content="Color constancy, Diffusion model, Image inpainting">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>GCC: Generative Color Constancy via Diffusing a Color Checker</title>
  <!-- Global site tag (gtag.js) - Google Analytics -->

  <script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
      dataLayer.push(arguments);
    }

    gtag('js', new Date());

    gtag('config', 'G-PYVRSFMDRL');
  </script>

  <link href="https://fonts.googleapis.com/css?family=Google+Sans|Noto+Sans|Castoro"
        rel="stylesheet">

  <link rel="stylesheet" href="./static/css/bulma.min.css">
  <link rel="stylesheet" href="./static/css/bulma-carousel.min.css">
  <link rel="stylesheet" href="./static/css/bulma-slider.min.css">
  <link rel="stylesheet" href="./static/css/fontawesome.all.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.8.0/codemirror.min.css">
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
  <link rel="stylesheet" href="./static/css/index.css">
  <!-- <link rel="stylesheet" href="./static/css/bootstrap.min.css"> -->
  <!-- <link rel="stylesheet" href="./static/css/app.css"> -->
  <link rel="icon" href="./static/images/favicon.svg">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.8.0/codemirror.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.5.3/clipboard.min.js"></script>
  <script defer src="./static/js/fontawesome.all.min.js"></script>
  <!-- <script src="./static/js/bulma-carousel.min.js"></script> -->
  <!-- <script src="./static/js/bulma-slider.min.js"></script> -->
  <!-- <script src="./static/js/index.js"></script> -->
  <!-- <script src="./static/js/video_comparison.js"></script> -->
  <!-- <script src="./static/js/app.js"></script> -->
  <style>
    .gradient-text {
      background: linear-gradient(45deg, #001861 0%, #CCCCCC 50%, #803C00 100%);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      font-size: 2.5rem;
      font-weight: bold;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }

    .wb-icon {
      height: 1em;
      vertical-align: middle;
    }
  </style>
</head>
<body>


<section class="hero">
  <div class="hero-body">
    <div class="container is-max-desktop">
      <div class="columns is-centered">
        <div class="column has-text-centered">
          <h1 class="title is-1 publication-title gradient-text">GCC <img src="static/images/favicon.svg" alt="icon" style="height: 1em; vertical-align: top;"></h1>
          <h2 class="subtitle is-3 publication-subtitle"><strong>Generative Color Constancy via Diffusing a Color Checker</strong></h2>
          <h3 class="subtitle is-3 publication-subtitle"><strong>CVPR 2025</strong></h3>
          <div class="is-size-4 publication-authors">
            <span class="author-block">
              <a href="https://chenwei891213.github.io/">Chen-Wei Chang</a><sup>1</sup>,</span>
            <span class="author-block">
              <a href="https://cdfan0627.github.io/">Cheng-De Fan</a><sup>1</sup>,</span>
            <span class="author-block">
              <a href="https://scholar.google.com.tw/citations?user=FK1RcpoAAAAJ">Chia-Che Chang</a><sup>2</sup>,</span>
            <span class="author-block">
              <a href="https://scholar.google.com/citations?user=EPYQ48sAAAAJ">Yi-Chen Lo</a><sup>2</sup>,</span>
            <span class="author-block">
              <a href="https://sites.google.com/view/yctseng">Yu-Chee Tseng</a><sup>1</sup>,</span>
            <span class="author-block">
              <a href="https://people.cs.nycu.edu.tw/~jlhuang/">Jiun-Long Huang</a><sup>1</sup>,</span>
            <span class="author-block">
              <a href="https://yulunalexliu.github.io/">Yu-Lun Liu</a><sup>1</sup></span>
    
          </div>

          <div class="is-size-4 publication-authors">
            <span class="author-block"><sup>1</sup>National Yang Ming Chiao Tung University,</span>
            <span class="author-block"><sup>2</sup>MediaTek</span>
          </div>

          <div class="column has-text-centered">
            <div class="publication-links">
              <!-- PDF Link. -->
              <span class="link-block">
                <a href="https://arxiv.org/abs/2502.17435"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                      <i class="ai ai-arxiv"></i>
                  </span>
                  <span>arXiv</span>
                </a>
              </span>
              <span class="link-block">
                <a href="https://github.com/chenwei891213/GCC-official"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                      <i class="fab fa-github"></i>
                  </span>
                  <span>Code</span>
                  </a>
              </span>
              <span class="link-block">
              <!-- Dataset Link. -->
              <!-- <span class="link-block">
                <a href="https://drive.google.com/drive/folders/1C0OqUSavUBwR_p_yNRBia90jvC-23hNN?usp=sharing"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                      <i class="far fa-images"></i>
                  </span>
                  <span>Data</span>
                  </a>
              </span> -->
              <!-- Results Link. -->
              <!-- <span class="link-block">
                <a href="https://drive.google.com/drive/folders/1ujTKiBfTBD_BVv9YiifOl_SfG8sd0dZ6?usp=sharing"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                      <i class="far fa-images"></i>
                  </span>
                  <span>Evaluation Results</span>
                  </a>
              </span> -->
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="hero teaser">
  <div class="container is-max-desktop">
    <div class="hero-body">
      <div class="pipeline-figure">
        <img src="./static/images/teaser.png" alt="Teaser" style="width: 100%;"/>
      </div>
 
    </div>
  </div>
</section>

<section class="section">
  <div class="container is-max-desktop">
    <!-- <div class="columns is-centered">
      <div class="column is-full-width">
        <h2 class="title is-2">News</h2>
        <h4>
          <strong>[2025.2.10]</strong> <img src="static/images/favicon.svg" alt="icon" style="height: 1em; vertical-align: -0.5mm;"> Release project page, arXiv paper, dataset, and evaluation results!
        </h4>
      </div>
    </div>   -->
    <div class="columns is-centered has-text-centered">
      <div class="column is-full-width">
        <h2 class="title is-2">Video</h2>
        <div class="video-container" style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%; border-radius: 12px;">
          <iframe style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border-radius: 12px;" src="https://www.youtube.com/embed/NRlQ7QJKpuM" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
      </div>
    </div>


    <!-- Abstract. -->
    <div class="columns is-centered has-text-centered">
      <div class="column is-full-width">
        <h2 class="title is-2">Abstract</h2>
        <div class="content has-text-justified">
          <p>
            Color constancy methods often struggle to generalize across different camera sensors due to varying spectral sensitivities. We present GCC, which leverages diffusion models to inpaint color checkers into images for illumination estimation. Our key innovations include (1) a single-step deterministic inference approach that inpaints color checkers reflecting scene illumination, (2) a Laplacian decomposition technique that preserves checker structure while allowing illumination-dependent color adaptation, and (3) a mask-based data augmentation strategy for handling imprecise color checker annotations. By harnessing rich priors from pre-trained diffusion models, GCC demonstrates strong robustness in challenging cross-camera scenarios. These results highlight our method's effective generalization capability across different camera characteristics without requiring sensor-specific training, making it a versatile and practical solution for real-world applications.
          </p>
        </div>
      </div>
    </div>
    <!--/ Abstract. -->

    <!-- Pipeline Fig. -->
    <div class="columns is-centered">
      <div class="column is-full-width">
        <h2 class="title is-2">Approach</h2>
        <h3 class="title is-3" style="font-family: sans-serif; text-align: center;">Training</h3>
        <div class="pipeline-figure">
          <img src="./static/images/pipeline.png" alt="Pipeline" style="width: 100%;"/>
        </div>
        <div class="content has-text-justified">
          <p>
            Starting from pretrained stable-diffusion-2-inpainting, we enable color checker generation through end-to-end fine-tuning. Given a ground truth color checker image and its mask, we apply color jittering in the masked region. The input image latent passes through Laplacian composition before being concatenated with the masked image latent and the resized mask for the SD Inpainting U-Net. The model is trained with an L2 loss between the inpainted output and ground truth image at a fixed timestep T.
          </p>
        </div>
      </div>
    </div>
    <div class="columns is-centered">
      <div class="column is-full-width">
        <h3 class="title is-3" style="font-family: sans-serif; text-align: center;">Inference</h3>
        <div class="pipeline-figure">
          <img src="./static/images/inference.png" alt="Pipeline" style="width: 100%;"/>
        </div>
        <div class="content has-text-justified">
          <p>
            A neutral color checker is pasted onto the input image, which is then encoded into the latent space. The input latent is processed through Laplacian composition before being concatenated with the masked image latent and the resized mask. The modified U-Net generates an inpainted result at fixed timestep T. After inverse gamma correction,we sample the color checker patches to obtain the final RGB illumination value. We highlight the steps and components that are different from the training pipeline.
          </p>
        </div>
      </div>
    </div>
    <!--/ Pipeline Fig. -->

    <div class="columns is-centered">
      <!-- Unseen Mask Gen. -->
      <div class="column">
        <div class="content">
          <h3 class="title is-3" style="font-family: sans-serif; text-align: center;">Color checker misalignment issue</h3>
          <div class="unseen-figure" style="display: flex; justify-content: center;">
            <img src="./static/images/mask_jitting.png" alt="Unseen" style="width: 60%;"/>
          </div>
          <p>
            Analysis of color checker alignment strategies. (a)
            Direct inpainting on masked regions leads to poor color checker
            structure. This is because we do not provide any guidance on the
            desired color checker structure, causing the model to generate contours that do not meet our expectations. (b) Using a homography
            transform to overlay a template suffers from pixel-level misalignment due to imprecise bounding box annotations. (c) Our mask
            color jittering approach overcomes corner point annotation limitations by allowing the model generate geometrically consistent color
            checker structures while accurately reflecting scene illumination.
          </p>
        </div>
      </div>

    </div>
    

    <div class="columns is-centered">
      <!-- Unseen Mask Gen. -->
      <div class="column">
        <div class="content">
          <h3 class="title is-3" style="font-family: sans-serif; text-align: center;">Laplacian Decomposition</h3>
          <div class="unseen-figure" style="display: flex; justify-content: center;">
            <img src="./static/images/laplacian.png" alt="Unseen" style="width: 60%;"/>
          </div>
          <p>
          We introduce Laplacian decomposition to address a key challenge in color checker generation: maintaining structural consistency while adapting to scene illumination. This technique extracts high-frequency components from the input image, preserving the color checker's patch layout while suppressing the original color patterns from our pre-pasted neutral color checker. This approach prevents the model from simply reconstructing the original colors, instead encouraging it to harmonize the generated color checker with the scene's illumination.
          </p>
        </div>
      </div>

    </div>
    <!-- <div class="columns is-centered"> -->
      <!-- Unseen Mask Gen. -->
      <!-- <div class="column">
        <div class="content">
          <h3 class="title is-3" style="font-family: sans-serif; text-align: center;">Color checker misalignment issue</h3>
          <div class="unseen-figure" style="display: flex; justify-content: center;">
            <img src="./static/images/mask_jitting.png" alt="Unseen" style="width: 60%;"/>
          </div>
          <p>
            Analysis of color checker alignment strategies. (a)
            Direct inpainting on masked regions leads to poor color checker
            structure. This is because we do not provide any guidance on the
            desired color checker structure, causing the model to generate contours that do not meet our expectations. (b) Using a homography
            transform to overlay a template suffers from pixel-level misalignment due to imprecise bounding box annotations. (c) Our mask
            color jittering approach overcomes corner point annotation limitations by allowing the model generate geometrically consistent color
            checker structures while accurately reflecting scene illumination.
          </p>
        </div>
      </div> -->
      <!-- Unseen Mask Gen. -->

      <!-- AGDD. -->
      <!-- <div class="column">
        <div class="content">
          <h2 class="title is-4">Adaptive Guided Depth Diffusion (AGDD)</h2>
            <div class="agdd-figure">
              <img src="./static/images/agdd.png" alt="Agdd" style="width: 100%;"/>
            </div>
            <p>
              Our AGDD is a zero-shot method that effectively aligns the estimated monocular depth with the existing geometric structure without requiring additional training.
            </p>
        </div>
      </div> -->
      <!--/ AGDD. -->
    <!-- </div> -->
    
  </div>
</section>

<section class="section">
  <div class="container is-max-desktop">
    <div class="columns is-centered">
      <div class="column is-full-width">
        <h2 class="title is-2">Qualitative results</h2>
      </div>
    </div>
    
    <div class="columns is-centered">
      <div class="column is-full-width">
        <h3 id="title-text" class="subtitle is-4" style="text-align: center;">
          Our method achieves consistent color correction performance across various in-the-wild scenes, demonstrating its practical robustness.
        </h3>
        
        <div class="text-center">
            <ul class="nav nav-pills center-pills">
                <li class="image-pill active" data-value="gehler"><a>Gehler dataset</a></li>
                <li class="image-pill" data-value="nus8"><a>NUS-8 dataset</a></li>
                <li class="image-pill" data-value="inthewild"><a>In-the-wild images</a></li>

            </ul>
        </div>
        
        <div class="image-container" id="image-gehler-container" style="display: flex; justify-content: center; text-align: center; margin: 0.5em;">
            <div>
              <img class="image gehler" src="static/images/qualitative_results_gehler.png">
            </div>
        </div>
        
        <div class="image-container" id="image-nus8-container" style="display: none; justify-content: center; text-align: center;  margin: 0.5em;">
            <div>
              <img class="image nus8" src="static/images/qualitative_results_nus8.png">
            </div>
        </div>

        <div class="image-container" id="image-inthewild-container" style="display: none; justify-content: center; text-align: center;  margin: 0.5em;">
            <div>
              <img class="image inthewild" src="static/images/qualitative_results_inthewild.png">
            </div>
        </div>

    </div>
  </div>
</section>
<script>
  const image_pills = document.querySelectorAll('.image-pill');
  const image_containers = document.querySelectorAll('.image-container');
  
  image_pills.forEach(pill => {
      pill.addEventListener('click', function() {
          // Remove active class from all pills
          image_pills.forEach(p => p.classList.remove('active'));
          // Add active class to clicked pill
          this.classList.add('active');
          
          // Hide all image containers
          image_containers.forEach(container => {
              container.style.display = 'none';
          });
          
          // Show selected container
          const selectedValue = this.getAttribute('data-value');
          document.getElementById(`image-${selectedValue}-container`).style.display = 'flex';  // Changed to 'flex'
      });
  });
</script>

<section class="section">
  <div class="container is-max-desktop">
    <!-- Animation. -->
    <div class="columns is-centered">
      <div class="column is-full-width">
        <h2 class="title is-2">Visualization Results</h2>
      </div>
    </div>
    <!--/ Animation. -->




    <div class="columns is-centered">
      <div class="column is-full-width">

          <h3 id="title-text" class="subtitle is-4" style="text-align: center;">
            These video demonstrates the robustness of our method across various color checker positions under a single illuminant scenario.
          </h3>
          <div class="text-center">
            <ul class="nav nav-pills center-pills">
                <li class="method-pill active" data-value="gehler"><a> Gehler dataset</a></li>
                <li class="method-pill" data-value="nus8"><a>NUS-8 dataset</a></li>
            </ul>
          </div>
      
            <div class="video-container" id="gehler-container" >
              <video class="video gehler" id="compVideo2" loop playsinline autoplay muted>
                  <source src="./video/gehler/8D5U5526.mp4" />
              </video>
              <video class="video gehler" id="compVideo3" loop playsinline autoplay muted>
                  <source src="./video/gehler/IMG_0895.mp4" />
              </video>
              <video class="video gehler" id="compVideo3" loop playsinline autoplay muted>
                <source src="./video/gehler/8D5U5543.mp4" />
              </video>
              <video class="video gehler" id="compVideo3" loop playsinline autoplay muted>
                <source src="./video/gehler/IMG_0404.mp4" />
              </video>
              <video class="video gehler" id="compVideo3" loop playsinline autoplay muted>
                <source src="./video/gehler/IMG_0609.mp4" />
              </video>
              <video class="video gehler" id="compVideo3" loop playsinline autoplay muted>
                <source src="./video/gehler/IMG_0892.mp4" />
              </video>
          </div>
            <div class="video-container active" id="nus8-container" style="display: none;";>
              <video class="video nus8" id="compVideo0" loop playsinline autoplay muted>
                  <source src="./video/NUS8/Canon1DsMkIII_0007.mp4" />
              </video>
              <video class="video nus8" id="compVideo1" loop playsinline autoplay muted>
                  <source src="./video/NUS8/OlympusEPL6_0072.mp4" />
              </video>
              <video class="video nus8" id="compVideo1" loop playsinline autoplay muted>
                <source src="./video/NUS8/OlympusEPL6_0080.mp4" />
              </video>
              <video class="video nus8" id="compVideo1" loop playsinline autoplay muted>
                <source src="./video/NUS8/Canon1DsMkIII_0150.mp4" />
              </video>
              <video class="video nus8" id="compVideo1" loop playsinline autoplay muted>
                <source src="./video/NUS8/FujifilmXM1_0174.mp4" />
              </video>
              <video class="video nus8" id="compVideo1" loop playsinline autoplay muted>
                <source src="./video/NUS8/NikonD5200_0095.mp4" />
              </video>
            </div>
  
            
 

            <script>
              const pills = document.querySelectorAll('.method-pill');
              const containers = document.querySelectorAll('.video-container');
              const allVideos = document.querySelectorAll('video');
              
              // 當任一影片播放時，同步播放所有影片
              allVideos.forEach(video => {
                  video.addEventListener('play', () => {
                      const currentTime = video.currentTime;
                      allVideos.forEach(v => {
                          if (v !== video) {
                              v.currentTime = currentTime;
                              v.play();
                          }
                      });
                  });
              });
              
              pills.forEach(pill => {
                  pill.addEventListener('click', function() {
                      // 移除所有 pill 的 active class
                      pills.forEach(p => p.classList.remove('active'));
                      // 添加 active class 到被點擊的 pill
                      this.classList.add('active');
              
                      // 隱藏所有視頻容器
                      containers.forEach(container => {
                          container.style.display = 'none';
                      });
              
                      // 顯示選中的視頻容器
                      const selectedValue = this.getAttribute('data-value');
                      document.getElementById(`${selectedValue}-container`).style.display = 'block';
                  });
              });
              </script>
          <div class="text-center">


              <br>
              
          </div>
      </div>   
    </div>

 
    <!-- Citation -->
    <div style="display: flex; flex-direction: column; align-items: center; width: 100%; margin: 20px 0;">
      <div style="font-size: 24px; font-weight: bold; margin-bottom: 15px;">Citation</div>
      <div style="width: 100%; max-width: 800px; background: #f5f5f5; padding: 15px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
        <textarea id="citation-textarea" style="width: 100%; min-height: 150px; font-family: monospace; padding: 10px; border: 1px solid #ddd; border-radius: 4px; resize: vertical; white-space: pre; overflow-x: auto;">@misc{chang2025gccgenerativecolorconstancy,
    title={GCC: Generative Color Constancy via Diffusing a Color Checker}, 
    author={Chen-Wei Chang and Cheng-De Fan and Chia-Che Chang and Yi-Chen Lo and Yu-Chee Tseng and Jiun-Long Huang and Yu-Lun Liu},
    year={2025},
    eprint={2502.17435},
    archivePrefix={arXiv},
    primaryClass={cs.CV},
    url={https://arxiv.org/abs/2502.17435}, 
  }</textarea>
        <!-- <button style="margin-top: 10px; padding: 8px 15px; background-color: #4a6fa5; color: white; border: none; border-radius: 4px; cursor: pointer;" onclick="copyCitation()">複製引用</button> -->
      </div>
    </div>
  
    <!-- <script>
      function copyCitation() {
        const textarea = document.getElementById('citation-textarea');
        textarea.select();
        document.execCommand('copy');
        alert('引用已複製到剪貼簿！');
      }
    </script> -->
    <!-- Citation -->
      
  </div>
</section>

<footer class="footer">
  <div class="container">
    <div class="content has-text-centered">
      <!-- <a class="icon-link"
         href="http://arxiv.org/abs/2502.05176">
        <i class="fas fa-file-pdf"></i>
      </a> -->
  
    </div>
    <div class="columns is-centered">
      <div class="column is-8">
        <div class="content">
          <p>
            Website template borrowed from <a href="https://nerfies.github.io/">NeRFies</a>, <a href="https://dorverbin.github.io/refnerf">Ref-NeRF</a>, <a href="https://reconfusion.github.io/">ReconFusion</a> and <a href="https://nesf3d.github.io/">NeSF</a>.
          </p>
        </div>
      </div>
    </div>
  </div>
</footer>

</body>
</html>
